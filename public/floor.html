
<!DOCTYPE html>
<!-- saved from url=(0041)http://dciarletta.github.io/d3-floorplan/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Floor Plan - local coordinate map layers for D3.js</title>
<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript" src="js/d3.v3.min.js"></script>
<script type="text/javascript" src="js/d3.floorplan.min.js"></script>
<style type="text/css">

	
	body {
	  font-size: 14px;
	  font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
	  margin: 50px auto 20px;
	  width: 720px;
	  background: #fcfcfc;
	  line-height: 1.45em;
	}
	a {
	  color: #555;
	}
	a:hover {
	  color: #000;
	}
	ul {
	  margin: 0 20px;
	  padding: 0;
	}
	div.code {
		border: 1px solid #ccc;
		background: #eee;
		margin: 10px 0 10px 0;
		padding: 10px;
		width: 720px;
	}
</style>
</head>
<body>
<h1>Floor Plan <small>(0.1.0)</small></h1>
<p>A layered map <a href="http://bost.ocks.org/mike/chart/">reusable chart</a> suitable for small area, local coordinate systems like building floor plans.
There is no tiling or projection capabilities, just simple X-Y scaled coordinates, pan-zoom functionality, and a set of layers for data visualization over the region.</p>
<p><strong><a href="http://dciarletta.github.io/d3-floorplan/#">d3.floorplan.min.js</a></strong><small> - requires <strong><a href="http://d3js.org/">D3.js</a></strong></small></p>

<ul>
	<li><strong><a href="http://github.com/dciarletta/d3-floorplan/wiki/API-Reference">API Reference</a></strong></li>
	<li><strong><a href="http://github.com/dciarletta/d3-floorplan/wiki/Data-Formats">Data Formats</a></strong></li>
</ul>

<h3>Example</h3>

<div id="demo"><svg height="487" width="720"><defs><radialgradient id="metal-bump" cx="50%" cy="50%" r="50%" fx="50%" fy="50%"><stop offset="0%" style="stop-color: #aaaaaa; stop-opacity: 0.6;"></stop><stop offset="100%" style="stop-color: #cccccc; stop-opacity: 0.5;"></stop></radialgradient><pattern id="grip-texture" patternUnits="userSpaceOnUse" x="0" y="0" width="3" height="3"><rect height="3" width="3" stroke="none" fill="rgba(204,204,204,0.5)"></rect><circle cx="1.5" cy="1.5" r="1" stroke="none" fill="url(#metal-bump)"></circle></pattern></defs><g class="map-layers" width="720" height="487" x="0" y="0" transform="translate(-948.260990484572,-746.1023692069216)scale(2.7132086548953422)"><rect class="canvas" pointer-events="all" style="opacity: 0;"></rect><g class="maplayer imagelayer"><g class="fp-imagelayer-1389455582332"><image href="Sample_Floorplan.jpg" width="720" height="487" y="0" x="0" style="opacity: 1;"></image></g></g><g class="maplayer heatmap"><g class="fp-heatmap-1389455582333"><g class="heatmap RdYlBu"><rect x="302.4" y="172.95057709381476" height="43.23764427345369" width="43.199999999999996" class="d6-6" style="opacity: 0.6;"><title>value: 20.20 °„C</title></rect><rect x="345.59999999999997" y="172.95057709381476" height="43.23764427345369" width="43.199999999999996" class="d6-5" style="opacity: 0.6;"><title>value: 19.90 °„C</title></rect><rect x="388.8" y="172.95057709381476" height="43.23764427345369" width="43.199999999999996" class="d6-3" style="opacity: 0.6;"><title>value: 19.70 °„C</title></rect><rect x="432" y="172.95057709381476" height="43.23764427345369" width="43.199999999999996" class="d6-3" style="opacity: 0.6;"><title>value: 19.70 °„C</title></rect><rect x="302.4" y="216.18822136726843" height="43.23764427345369" width="43.199999999999996" class="d6-6" style="opacity: 0.6;"><title>value: 20.50 °„C</title></rect><rect x="345.59999999999997" y="216.18822136726843" height="43.23764427345369" width="43.199999999999996" class="d6-1" style="opacity: 0.6;"><title>value: 19.30 °„C</title></rect><rect x="388.8" y="216.18822136726843" height="43.23764427345369" width="43.199999999999996" class="d6-1" style="opacity: 0.6;"><title>value: 19.40 °„C</title></rect><rect x="432" y="216.18822136726843" height="43.23764427345369" width="43.199999999999996" class="d6-5" style="opacity: 0.6;"><title>value: 19.90 °„C</title></rect><path d="M36.1999999999999,115.30038472920984L87.39999999999985,115.30038472920984L87.39999999999985,76.06274045575617L118.19999999999982,31.825096182302445L200.99999999999986,31.825096182302445L234.40000000000066,76.06274045575617L234.4000000000004,145.30038472920972L247.80000000000058,144.3003847292098L248.80000000000064,261.42586564072224L36.1999999999999,259.4258656407221Z" class="d6-5" style="opacity: 0.6;"><title>value: 19.90 °„C</title></path><text text-anchor="middle" transform="translate(146.28337162205608,159.30800722604113)" style="font-weight: bold; opacity: 0.6;">19.90 °„C</text></g></g></g><g class="maplayer vectorfield"><g class="fp-vectorfield-1389455582333"><path class="vector" vector-effect="non-scaling-stroke" d="M280.8,324.28233205090265L302.4,340.49644865344777" style="opacity: 1;"><title>5 ft/s</title></path><path class="vector" vector-effect="non-scaling-stroke" d="M324,324.28233205090265L340.20000000000005,340.49644865344777" style="opacity: 1;"><title>4.242640687119285 ft/s</title></path><path class="vector" vector-effect="non-scaling-stroke" d="M280.8,367.5199763243564L286.2,378.32938739271975" style="opacity: 1;"><title>2.23606797749979 ft/s</title></path><path class="vector" vector-effect="non-scaling-stroke" d="M324,367.5199763243564L307.8,389.1387984610832" style="opacity: 1;"><title>5 ft/s</title></path><path class="vector" vector-effect="non-scaling-stroke" d="M367.2,367.5199763243564L345.59999999999997,372.92468185853807" style="opacity: 1;"><title>4.123105625617661 ft/s</title></path></g></g><g class="maplayer pathplot"><g class="fp-pathplot-1389455582333"><path vector-effect="non-scaling-stroke" fill="none" class="planned" d="M342.72,441.02397158922764L280.8,370.40248594258657L208.79999999999998,370.40248594258657L190.08,177.27434152116015" style="opacity: 1;"><title>flt-1</title></path></g></g><g class="maplayer overlays"><g class="fp-overlays-1389455582334"><rect class="overlay-canvas" pointer-events="all" x="0" y="0" height="487" width="720" style="opacity: 0;"></rect><path class="polygon" vector-effect="non-scaling-stroke" pointer-events="all" d="M36.19999999999949,111.30038472921001L87.39999999999921,111.30038472921001L87.39999999999921,72.06274045575627L119.19999999999906,29.825096182302367L201.0000000000002,27.82509618230237L234.4000000000015,72.06274045575627L234.4000000000012,141.30038472921L247.8000000000012,140.3003847292101L248.8000000000013,257.42586564072286L36.19999999999949,255.42586564072275Z" style="cursor: move;"><title>kitchen</title></path><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="36.19999999999949" cy="111.30038472921001" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="87.39999999999921" cy="111.30038472921001" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="87.39999999999921" cy="72.06274045575627" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="119.19999999999906" cy="29.825096182302367" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="201.0000000000002" cy="27.82509618230237" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="234.4000000000015" cy="72.06274045575627" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="234.4000000000012" cy="141.30038472921" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="247.8000000000012" cy="140.3003847292101" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="248.8000000000013" cy="257.42586564072286" style="cursor: move;"></circle><circle class="vertex" pointer-events="all" vector-effect="non-scaling-stroke" r="4" cx="36.19999999999949" cy="255.42586564072275" style="cursor: move;"></circle></g></g></g><g class="map-controls" view-width="720" transform="translate(710,0)"><path class="ui-show-hide" d="M10,3 v40 h-7 a3,3 0 0,1 -3,-3 v-34 a3,3 0 0,1 3,-3 Z" fill="url(#grip-texture)" stroke="none" style="opacity: 0.5;"></path><path class="show ui-show-hide" d="M2,23 l6,-15 v30 Z" fill="rgb(204,204,204)" stroke="none" style="opacity: 0.5;"></path><path class="hide" d="M8,23 l-6,-15 v30 Z" fill="rgb(204,204,204)" stroke="none" style="opacity: 0;"></path><path d="M10,3 v40 h-7 a3,3 0 0,1 -3,-3 v-34 a3,3 0 0,1 3,-3 Z" pointer-events="all" fill="none" stroke="none" style="cursor: pointer;"></path><rect x="10" y="0" width="85" fill="rgba(204,204,204,0.9)" stroke="none" height="110"></rect><g class="layer-controls" transform="translate(15,5)"><g class="ui-active" transform="translate(0,80)" style="cursor: pointer;"><rect x="0" y="1" rx="5" ry="5" width="75" height="18" stroke-width="1px"></rect><text x="10" y="15" style="font-size: 12px; font-family: Helvetica, Arial, sans-serif;">imagelayer</text></g><g class="ui-active" transform="translate(0,60)" style="cursor: pointer;"><rect x="0" y="1" rx="5" ry="5" width="75" height="18" stroke-width="1px"></rect><text x="10" y="15" style="font-size: 12px; font-family: Helvetica, Arial, sans-serif;">heatmap</text></g><g class="ui-active" transform="translate(0,40)" style="cursor: pointer;"><rect x="0" y="1" rx="5" ry="5" width="75" height="18" stroke-width="1px"></rect><text x="10" y="15" style="font-size: 12px; font-family: Helvetica, Arial, sans-serif;">vectorfield</text></g><g class="ui-active" transform="translate(0,20)" style="cursor: pointer;"><rect x="0" y="1" rx="5" ry="5" width="75" height="18" stroke-width="1px"></rect><text x="10" y="15" style="font-size: 12px; font-family: Helvetica, Arial, sans-serif;">pathplot</text></g><g class="ui-active" transform="" style="cursor: pointer;"><rect x="0" y="1" rx="5" ry="5" width="75" height="18" stroke-width="1px"></rect><text x="10" y="15" style="font-size: 12px; font-family: Helvetica, Arial, sans-serif;">overlays</text></g></g></g></svg></div>

<script id="demo-code" type="text/javascript">
var xscale = d3.scale.linear()
               .domain([0,50.0])
               .range([0,720]),
    yscale = d3.scale.linear()
               .domain([0,33.79])
               .range([0,487]),
    map = d3.floorplan().xScale(xscale).yScale(yscale),
    imagelayer = d3.floorplan.imagelayer(),
    heatmap = d3.floorplan.heatmap(),
    vectorfield = d3.floorplan.vectorfield(),
    pathplot = d3.floorplan.pathplot(),
    overlays = d3.floorplan.overlays().editMode(true),
    mapdata = {};

mapdata[imagelayer.id()] = [{
    //url: 'Sample_Floorplan.jpg',
    x: 0,
    y: 0,
    height: 33.79,
    width: 50.0
     }];

map.addLayer(imagelayer)
   .addLayer(heatmap)
   .addLayer(vectorfield)
   .addLayer(pathplot)
   .addLayer(overlays);

d3.json("demo-data.json", function(data) {
	mapdata[heatmap.id()] = data.heatmap;
	mapdata[overlays.id()] = data.overlays;
	//mapdata[vectorfield.id()] = data.vectorfield;
	//mapdata[pathplot.id()] = data.pathplot;
	
	d3.select("#demo").append("svg")
		.attr("height", 487).attr("width",720)
		.datum(mapdata).call(map);
});
</script>
<h3>More to come...</h3>
<p><small><i>Written by</i> David Ciarletta</small></p>



<div style="visibility: hidden; top: 0px; height: 0px; width: 0px; overflow-y: scroll;"><div style="height: 2000px;"></div></div></body></html>